// Translations System for Amelia Apts & Rooms
const translations = {
    it: {
        // Preloader
        'loading': 'Caricamento',
        
        // Navigation
        'nav-rooms': 'Rooms',
        'nav-location': 'Location',
        'nav-contact': 'Contattaci',
        
        // Header buttons
        'whatsapp-now': 'WhatsApp now',
        'email-now': 'Email now',
        'book-now': 'Prenota Ora',
        'choose-contact': 'Scegli il contatto',
        'whatsapp-subtitle': 'Seleziona il contatto per aprire WhatsApp',
        
        // Hero section
        'hero-subtitle': 'Appartamenti e camere di pregio nel Cuore di Alghero',
        
        // Rooms section
        'our-apartments': 'I Nostri Appartamenti',
        'our-rooms': 'Le Nostre Camere',
        
        // Reviews
        'guest-reviews': 'Recensioni dei nostri Ospiti',
        
        // Attractions
        'discover-alghero': 'Scopri i Dintorni di Alghero',
        'discover-subtitle': 'Esplora le meraviglie che circondano la nostra struttura',
        
        // Attraction cards
        'historic-center': 'Centro Storico',
        'historic-center-desc': 'Passeggia tra i vicoli medievali e le mura catalane del centro storico di Alghero, a soli 5 minuti a piedi.',
        '5min-walk': '5 min a piedi',
        'culture-history': 'Cultura & Storia',
        
        'crystal-beaches': 'Spiagge Cristalline',
        'crystal-beaches-desc': 'Rilassati sulle splendide spiagge di Alghero con acque turchesi e sabbia dorata.',
        '10min-car': '10 min in auto',
        'sea-relax': 'Mare & Relax',
        
        'capo-caccia': 'Capo Caccia',
        'capo-caccia-desc': 'Esplora le impressionanti scogliere e le grotte di Nettuno, tra le più belle del Mediterraneo.',
        '25min-car': '25 min in auto',
        'nature-adventure': 'Natura & Avventura',
        
        'historic-monuments': 'Monumenti Storici',
        'historic-monuments-desc': 'Visita la Cattedrale di Santa Maria, le Torri e i Bastioni che raccontano secoli di storia.',
        '7min-walk': '7 min a piedi',
        'art-monuments': 'Arte & Monumenti',
        
        'wine-food': 'Enogastronomia',
        'wine-food-desc': 'Degusta i piatti della tradizione sarda e i vini locali nei ristoranti del centro storico.',
        '3min-walk': '3 min a piedi',
        'food-wine': 'Food & Wine',
        
        'marine-activities': 'Attività Marine',
        'marine-activities-desc': 'Immersioni, snorkeling, escursioni in barca e sport acquatici per vivere il mare in ogni modo.',
        'harbor-nearby': 'Porto vicino',
        'sport-sea': 'Sport & Mare',
        
        // Quality services
        'quality-services': 'Qualità della struttura',
        'private-parking': 'Parcheggio Privato',
        'private-parking-desc': 'Parcheggio privato e sicuro, disponibile anche posti in strada',
        'free-wifi': 'Wi-Fi Gratuito',
        'free-wifi-desc': 'Connessione WiFi ad alta velocità gratuita in tutta la struttura',
        'internet-connection': 'Connessione Internet',
        'internet-connection-desc': 'Accesso internet veloce e affidabile per lavoro e svago',
        'panoramic-view': 'Vista Panoramica',
        'panoramic-view-desc': 'Balcone con vista città, giardino e panorami mozzafiato',
        'accessibility': 'Accessibilità',
        'accessibility-desc': 'Unità completamente accessibile situata al piano terra',
        'equipped-kitchen': 'Cucina Attrezzata',
        'equipped-kitchen-desc': 'Angolo cottura completo, macchina da caffè, bollitore e tavolo da pranzo',
        
        // Location highlights
        'nearby-highlights': 'Punti di Interesse Vicini',
        '5min-historic': '5 min dal centro storico',
        '10min-beach': '10 min dalla spiaggia',
        '15min-airport': '15 min dall\'aeroporto di Alghero',
        
        // Contact section
        'send-message': 'Invia un Messaggio',
        'name-surname': 'Nome e Cognome',
        'your-email': 'La Tua Email',
        'phone-number': 'Numero di Telefono',
        'your-message': 'Il Tuo Messaggio',
        'send': 'Invia',
        'contact-us': 'Contattaci',
        'contact-question': 'Hai una domanda o desideri prenotare? Saremo lieti di aiutarti.',
        'contact-form-info': 'Compila il modulo e ti risponderemo il prima possibile.',
        'email-label': 'Email:',
        'phone-label': 'Telefono:',
        'address-label': 'Indirizzo:',
        'address': 'Via La Marmora, Alghero, Sardegna',
        
        // Footer
        'privacy-policy': 'Privacy Policy',
        'cookie-preferences': 'Gestisci Preferenze Cookie',
        'all-rights': 'Tutti i diritti riservati',
        
        // Cookie banner
        'cookie-message': 'Utilizziamo i cookie per migliorare la tua esperienza sul nostro sito. Cliccando su "Accetta", acconsenti all\'uso di tutti i cookie. Per maggiori informazioni, consulta la nostra',
        'cookie-policy': 'Politica sui Cookie',
        'accept': 'Accetta',
        'decline': 'Rifiuta',
        
        // Contact Modal
        'contact-modal-title': 'Richiesta Informazioni',
        'contact-modal-name': 'Nome e Cognome:',
        'contact-modal-email': 'Email:',
        'contact-modal-checkin': 'Soggiorno dal:',
        'contact-modal-checkout': 'al:',
        'contact-modal-phone': 'Telefono:',
        'contact-modal-room-type': 'Tipologia Camera:',
        'contact-modal-notes': 'Note Varie:',
        'contact-modal-notes-placeholder': 'Inserisci eventuali richieste speciali...',
        'contact-modal-submit': 'Invia Richiesta',
        'contact-modal-select-room': 'Seleziona una camera',
        'contact-modal-close': 'Chiudi il modulo di contatto',
        
        // Room Types
        'room-single': 'Camera Singola',
        'room-double': 'Camera Doppia',
        'room-matrimonial': 'Camera Matrimoniale',
        'room-matrimonial-deluxe': 'Camera Matrimoniale Deluxe',
        'room-matrimonial-superior': 'Camera Matrimoniale Superior',
        'room-matrimonial-patio': 'Camera Matrimoniale con Patio',
        'room-matrimonial-garden': 'Camera Matrimoniale con Vista Giardino',
        'apt-studio': 'Appartamento Monolocale',
        'apt-1bedroom': 'Appartamento con 1 Camera da Letto',
        'apt-terrace': 'Appartamento con Terrazza',
        'apt-superior': 'Appartamento Superior',
        'apt-2levels': 'Appartamentino su 2 Livelli'
    },
      en: {
        // Preloader
        'loading': 'Loading',
        
        // Navigation
        'nav-rooms': 'Rooms',
        'nav-location': 'Location',
        'nav-contact': 'Contact Us',
        
        // Header buttons
        'whatsapp-now': 'WhatsApp now',
        'email-now': 'Email now',
        'book-now': 'Book Now',
        'choose-contact': 'Choose contact',
        'whatsapp-subtitle': 'Select contact to open WhatsApp',
        
        // Hero section
        'hero-subtitle': 'Premium apartments and rooms in the heart of Alghero',
        
        // Rooms section
        'our-apartments': 'Our Apartments',
        'our-rooms': 'Our Rooms',
        
        // Reviews
        'guest-reviews': 'Guest Reviews',
        
        // Attractions
        'discover-alghero': 'Discover Alghero\'s Surroundings',
        'discover-subtitle': 'Explore the wonders that surround our property',
        
        // Attraction cards
        'historic-center': 'Historic Center',
        'historic-center-desc': 'Stroll through the medieval alleys and Catalan walls of Alghero\'s historic center, just 5 minutes on foot.',
        '5min-walk': '5 min walk',
        'culture-history': 'Culture & History',
        
        'crystal-beaches': 'Crystal Clear Beaches',
        'crystal-beaches-desc': 'Relax on Alghero\'s stunning beaches with turquoise waters and golden sand.',
        '10min-car': '10 min by car',
        'sea-relax': 'Sea & Relax',
        
        'capo-caccia': 'Capo Caccia',
        'capo-caccia-desc': 'Explore the impressive cliffs and Neptune\'s Caves, among the most beautiful in the Mediterranean.',
        '25min-car': '25 min by car',
        'nature-adventure': 'Nature & Adventure',
        
        'historic-monuments': 'Historic Monuments',
        'historic-monuments-desc': 'Visit the Cathedral of Santa Maria, the Towers and Bastions that tell centuries of history.',
        '7min-walk': '7 min walk',
        'art-monuments': 'Art & Monuments',
        
        'wine-food': 'Wine & Food',
        'wine-food-desc': 'Taste traditional Sardinian dishes and local wines in the historic center restaurants.',
        '3min-walk': '3 min walk',
        'food-wine': 'Food & Wine',
        
        'marine-activities': 'Marine Activities',
        'marine-activities-desc': 'Diving, snorkeling, boat excursions and water sports to experience the sea in every way.',
        'harbor-nearby': 'Harbor nearby',
        'sport-sea': 'Sport & Sea',
        
        // Quality services
        'quality-services': 'Property Quality',
        'private-parking': 'Private Parking',
        'private-parking-desc': 'Private and secure parking, street parking also available',
        'free-wifi': 'Free Wi-Fi',
        'free-wifi-desc': 'Free high-speed WiFi connection throughout the property',
        'internet-connection': 'Internet Connection',
        'internet-connection-desc': 'Fast and reliable internet access for work and leisure',
        'panoramic-view': 'Panoramic View',
        'panoramic-view-desc': 'Balcony with city view, garden and breathtaking panoramas',
        'accessibility': 'Accessibility',
        'accessibility-desc': 'Fully accessible unit located on the ground floor',
        'equipped-kitchen': 'Equipped Kitchen',
        'equipped-kitchen-desc': 'Complete kitchenette, coffee machine, kettle and dining table',
        
        // Location highlights
        'nearby-highlights': 'Nearby Highlights',
        '5min-historic': '5 min from the historic center',
        '10min-beach': '10 min from the beach',
        '15min-airport': '15 min from Alghero airport',
        
        // Contact section
        'send-message': 'Send a Message',
        'name-surname': 'Name and Surname',
        'your-email': 'Your Email',
        'phone-number': 'Phone Number',
        'your-message': 'Your Message',
        'send': 'Send',
        'contact-us': 'Contact Us',
        'contact-question': 'Have a question or want to book? We\'ll be happy to help you.',
        'contact-form-info': 'Fill out the form and we\'ll get back to you as soon as possible.',
        'email-label': 'Email:',
        'phone-label': 'Phone:',
        'address-label': 'Address:',
        'address': 'Via La Marmora, Alghero, Sardinia',
        
        // Footer
        'privacy-policy': 'Privacy Policy',
        'cookie-preferences': 'Manage Cookie Preferences',
        'all-rights': 'All rights reserved',
        
        // Cookie banner
        'cookie-message': 'We use cookies to improve your experience on our site. By clicking "Accept", you consent to the use of all cookies. For more information, see our',
        'cookie-policy': 'Cookie Policy',
        'accept': 'Accept',
        'decline': 'Decline',
        
        // Contact Modal
        'contact-modal-title': 'Information Request',
        'contact-modal-name': 'Name and Surname:',
        'contact-modal-email': 'Email:',
        'contact-modal-checkin': 'Stay from:',
        'contact-modal-checkout': 'to:',
        'contact-modal-phone': 'Phone:',
        'contact-modal-room-type': 'Room Type:',
        'contact-modal-notes': 'Additional Notes:',
        'contact-modal-notes-placeholder': 'Enter any special requests...',
        'contact-modal-submit': 'Send Request',
        'contact-modal-select-room': 'Select a room',
        'contact-modal-close': 'Close contact form',
        
        // Room Types
        'room-single': 'Single Room',
        'room-double': 'Double Room',
        'room-matrimonial': 'Matrimonial Room',
        'room-matrimonial-deluxe': 'Deluxe Matrimonial Room',
        'room-matrimonial-superior': 'Superior Matrimonial Room',
        'room-matrimonial-patio': 'Matrimonial Room with Patio',
        'room-matrimonial-garden': 'Matrimonial Room with Garden View',
        'apt-studio': 'Studio Apartment',
        'apt-1bedroom': '1 Bedroom Apartment',
        'apt-terrace': 'Apartment with Terrace',
        'apt-superior': 'Superior Apartment',
        'apt-2levels': '2-Level Small Apartment'
    }
};

class TranslationManager {
    constructor() {
        this.currentLanguage = 'it'; // Default language
        this.init();
    }

    init() {
        // Load saved language preference
        const savedLang = localStorage.getItem('preferred-language');
        if (savedLang && translations[savedLang]) {
            this.currentLanguage = savedLang;
        }

        // Set up language button event listeners
        this.setupLanguageButtons();
        
        // Apply initial translation
        this.applyTranslations();
        
        // Update active language button
        this.updateActiveLanguageButton();
    }

    setupLanguageButtons() {
        const langButtons = document.querySelectorAll('.lang-btn');
        langButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                const lang = button.getAttribute('data-lang');
                this.switchLanguage(lang);
            });
        });
    }    switchLanguage(lang) {
        if (translations[lang]) {
            this.currentLanguage = lang;
            localStorage.setItem('preferred-language', lang);
            this.applyTranslations();
            this.updateActiveLanguageButton();
            this.updateWhatsAppLink();
            this.updateBookingLink();
            
            // Reload dynamic content (rooms/apartments)
            this.reloadDynamicContent();
        }
    }

    reloadDynamicContent() {
        // Reload accommodation data with new language
        if (window.loadAccommodationData) {
            loadAccommodationData();
        }
        
        // Update attractions data if available
        this.updateAttractionsData();
    }

    updateAttractionsData() {
        // Update attractions modal content if needed
        if (window.attractionsData && this.currentLanguage === 'en') {
            // English translations for attractions
            const englishAttractions = {
                'centro-storico': {
                    title: 'Alghero Historic Center',
                    description: 'Stroll through the medieval alleys and Catalan walls of Alghero\'s historic center, declared a UNESCO World Heritage site.'
                },
                'mare': {
                    title: 'Alghero Beaches',
                    description: 'Discover the wonderful golden sand beaches and crystal clear waters surrounding Alghero.'
                },
                'natura': {
                    title: 'Capo Caccia and Neptune\'s Caves',
                    description: 'Explore the impressive cliffs of Capo Caccia and the famous Neptune\'s Caves.'
                },
                'cultura': {
                    title: 'Monuments and Art',
                    description: 'Visit the main historical and artistic monuments of Alghero, witnesses of centuries of history.'
                },
                'enogastronomia': {
                    title: 'Sardinian Food & Wine',
                    description: 'Taste the authentic flavors of Sardinia in Alghero\'s restaurants and wineries.'
                },
                'sport': {
                    title: 'Marine Activities and Sports',
                    description: 'Experience the sea of Alghero through diving, boat excursions and water sports.'
                }
            };

            // Update attractions data for English
            Object.keys(englishAttractions).forEach(key => {
                if (window.attractionsData[key]) {
                    window.attractionsData[key].title = englishAttractions[key].title;
                    window.attractionsData[key].description = englishAttractions[key].description;
                }
            });
        }
    }

    updateActiveLanguageButton() {
        const langButtons = document.querySelectorAll('.lang-btn');
        langButtons.forEach(button => {
            button.classList.remove('active');
            if (button.getAttribute('data-lang') === this.currentLanguage) {
                button.classList.add('active');
            }
        });
    }    applyTranslations() {
        const elementsToTranslate = document.querySelectorAll('[data-i18n]');
        
        elementsToTranslate.forEach(element => {
            const key = element.getAttribute('data-i18n');
            const translation = translations[this.currentLanguage][key];
            
            if (translation) {
                element.textContent = translation;
            }
        });

        // Handle placeholders
        const placeholderElements = document.querySelectorAll('[data-i18n-placeholder]');
        placeholderElements.forEach(element => {
            const key = element.getAttribute('data-i18n-placeholder');
            const translation = translations[this.currentLanguage][key];
            
            if (translation) {
                element.setAttribute('placeholder', translation);
            }
        });

        // Handle aria-label translations
        const ariaElements = document.querySelectorAll('[data-i18n-aria]');
        ariaElements.forEach(element => {
            const key = element.getAttribute('data-i18n-aria');
            const translation = translations[this.currentLanguage][key];
            
            if (translation) {
                element.setAttribute('aria-label', translation);
            }
        });

        // Update page title
        this.updatePageTitle();
        
        // Update meta description
        this.updateMetaDescription();
        
        // Update HTML lang attribute
        this.updateHtmlLang();
    }

    updateHtmlLang() {
        const htmlElement = document.documentElement;
        htmlElement.setAttribute('lang', this.currentLanguage);
    }

    updatePageTitle() {
        const titles = {
            it: 'Amelia Apts & Rooms - Appartamenti e Camere ad Alghero | Sardegna',
            en: 'Amelia Apts & Rooms - Apartments and Rooms in Alghero | Sardinia'
        };
        
        document.title = titles[this.currentLanguage] || titles.it;
    }

    updateMetaDescription() {
        const descriptions = {
            it: 'Scopri Amelia Apts & Rooms ad Alghero: appartamenti moderni e camere confortevoli a 5 minuti dal centro storico e 10 minuti dalla spiaggia. WiFi gratuito, parcheggio e vista città.',
            en: 'Discover Amelia Apts & Rooms in Alghero: modern apartments and comfortable rooms 5 minutes from the historic center and 10 minutes from the beach. Free WiFi, parking and city view.'
        };

        const metaDesc = document.querySelector('meta[name="description"]');
        if (metaDesc) {
            metaDesc.setAttribute('content', descriptions[this.currentLanguage] || descriptions.it);
        }
    }

    updateWhatsAppLink() {
        const whatsappMessages = {
            it: 'Ciao! Sono interessato agli appartamenti Amelia Apts',
            en: 'Hello! I\'m interested in Amelia Apts apartments'
        };

        const whatsappLinks = document.querySelectorAll('a[href*="whatsapp"]');
        whatsappLinks.forEach(link => {
            const baseUrl = 'https://api.whatsapp.com/send/?phone=393123456789&text=';
            const message = encodeURIComponent(whatsappMessages[this.currentLanguage]);
            link.href = baseUrl + message;
        });
    }

    updateBookingLink() {
        const bookingLinks = {
            it: 'https://www.booking.com/hotel/it/central-la-marmora.it.html',
            en: 'https://www.booking.com/hotel/it/central-la-marmora.en-gb.html'
        };

        const bookingElements = document.querySelectorAll('a[href*="booking.com"]');
        bookingElements.forEach(link => {
            link.href = bookingLinks[this.currentLanguage] || bookingLinks.it;
        });
    }

    getCurrentLanguage() {
        return this.currentLanguage;
    }
}

// Initialize translation manager when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    window.translationManager = new TranslationManager();
});
